---
title: " NAMED ENTITY RECOGNITION (NER)"
tags:
  - NLP
  - NER
  - "2023"
excerpt : "NLP - Explanation of the named entity recognition task<br>- Difficulty : beginner"
header:
   overlay_color: "#1C2A4D"
author_profile: false
translation: "NER/"
sidebar:
    nav: sidebar-nlp-en
classes: wide
---

# Foreword
La version initiale de cet article de blog a été mise en ligne en janvier 2024.<br> 
Une actualisation a eu lieu en novembre 2024 pour référencer quatre nouveaux modèles.
<br><br> 

# What is named entity recognition?
<p style="text-align:justify;">
Named Entity Recognition, often abbreviated as NER, is a task in Natural Language Processing (NLP) that involves labeling sequences of words in a text that represents names entities such as people, companies, places, diseases, etc.<br>
From a technical point of view, the NER task can be considered as classification, where instead of classifying at the level of the whole sentence (for sentiment analysis, for example), we classify at the level of the word, indicating to which class the processed word belongs.
</p>
<br><br> 

# NER Datasets
<p style="text-align:justify;">
The best-known and leading NER dataset is the <a href="https://www.clips.uantwerpen.be/conll2003/ner/"> CoNLL-2003 (Conference on Computational Natural Language Learning)</a> dataset by Erik F. Tjong Kim Sang and Fien De Meulderet (2003). Initially created for English and German speakers, other languages have generally adopted its formatting.<br>
Below an example of a line from this dataset:<br>
</p>
<center>
<figure class="image">
  <img src="https://raw.githubusercontent.com/catie-aq/blog-vaniila/main/assets/images/NER/CONLL.png">
  <figcaption>
  <i>Example of lines from the CoNLL-2003 dataset</i>
  </figcaption>
</figure>
</center>

<br>

<p style="text-align:justify;">
For French speakers, datasets have been created following the CoNLL-2003 methodology. These include: <br>
-	<a href="http://dx.doi.org/10.1016/j.artint.2012.03.006">WikiNER</a> by Nothman et al. (2013) which is a dataset (for the French part) of 120,682 training data and 13,410 test data. The entities announced are LOC (Locations), ORG (Organizations), PER (Personalities) and MISC (Miscellaneous) and are distributed as follows:<br>
</p>

<center>
<table>
<thead>
<tr>
<th>Split</th>
<th>O</th>
<th>PER</th>
<th>LOC</th>
<th>ORG</th>
<th>MISC</th>
</tr>
</thead>
<tbody>
<tr>
<td>train</td>
<td>2,781,968</td>
<td>116,633</td>
<td>140,345</td>
<td>41,547</td>
<td>73,411</td>
</tr>
<tr>
<td>test</td>
<td>305,131</td>
<td>13,345</td>
<td>15,220</td>
<td>3,896</td>
<td>8,183</td>
</tr>
</tbody>
</table>
</center>

<p style="text-align:justify;">
-	<a href="https://arxiv.org/abs/1902.00193">Wikiann</a> by Rahimi et al. (2019) based on Pan, Xiaoman, et al. (2019) which is a dataset (for the French part) with 20,000 training data, 10,000 validation data and 10,000 test data. The entities announced are LOC, ORG, PER and MISC and are distributed as follows:<br>
</p>

<center>
<table>
<thead>
<tr>
<th>Split</th>
<th>O</th>
<th>PER</th>
<th>LOC</th>
<th>ORG</th>
</tr>
</thead>
<tbody>
<tr>
<td>train</td>
<td>65,292</td>
<td>21,992</td>
<td>21,273</td>
<td>28,231</td>
</tr>
<tr>
<td>validation</td>
<td>32,167</td>
<td>10,826</td>
<td>10,826</td>
<td>14,401</td>
</tr>
<tr>
<td>test</td>
<td>32,612</td>
<td>11,027</td>
<td>10,844</td>
<td>14,271</td>
</tr>
</tbody>
</table>
</center>

 <p style="text-align:justify;">
-	<a href="https://aclanthology.org/2022.findings-naacl.60/">MultiNERD</a> by Tedeschi and  Navigli (2022) which is a dataset (for the French part) of 140,880 training data, 17,610 validation data and 17,695 test data. The entities announced are PER, LOC, ORG, ANIM, BIO, CEL, DIS, EVE, FOOD, INST, MEDIA, PLANT, MYTH, TIME, VEHI and are distributed as follows:<br>
 </p>
 
<center>
<table>
<thead>
<tr>
<th>Split</th>
<th>O</th>
<th>PER</th>
<th>LOC</th>
<th>ORG</th>
<th>ANIM</th>
<th>BIO</th>
<th>CEL</th>
<th>DIS</th>
<th>EVE</th>
<th>FOOD</th>
<th>INST</th>
<th>MEDIA</th>
<th>MYTH</th>
<th>PLANT</th>
<th>TIME</th>
<th>VEHI</th>
</tr>
</thead>
<tbody>
<tr>
<td>train</td>
<td>2,979,567</td>
<td>151,201</td>
<td>218,858</td>
<td>109,429</td>
<td>12,800</td>
<td>21</td>
<td>3,031</td>
<td>4,107</td>
<td>20,523</td>
<td>3,282</td>
<td>992</td>
<td>19,943</td>
<td>1,591</td>
<td>4,543</td>
<td>23,555</td>
<td>1,129</td>
</tr>
<tr>
<td>validation</td>
<td>402,643</td>
<td>17,599</td>
<td>14,151</td>
<td>3,498</td>
<td>766</td>
<td>NaN</td>
<td>392</td>
<td>698</td>
<td>2,009</td>
<td>795</td>
<td>157</td>
<td>1,444</td>
<td>541</td>
<td>832</td>
<td>6,456</td>
<td>156</td>
</tr>
<tr>
<td>test</td>
<td>406,146</td>
<td>18,591</td>
<td>14,124</td>
<td>3,685</td>
<td>844</td>
<td>6</td>
<td>390</td>
<td>709</td>
<td>2,137</td>
<td>776</td>
<td>174</td>
<td>1,615</td>
<td>453</td>
<td>654</td>
<td>4,872</td>
<td>96</td>
</tr>
</tbody>
</table>
</center>

<p style="text-align:justify;">
-	<a href="http://dx.doi.org/10.1016/j.artint.2012.03.006">MultiCONER  v2</a> by Fetahu et al. (2023) which is a dataset (for the French part) of 120,682 training data and 13,410 test data. The entities announced are Location (including Facility, OtherLOC, HumanSettlement, Station), Creative Work (including VisualWork, MusicalWork, WrittenWork, ArtWork, Software), Group (including MusicalGRP, PublicCORP, PrivateCORP, AerospaceManufacturer, SportsGRP, CarManufacturer, ORG), Person (including Scientist, Artist, Athlete, Politician, Cleric, SportsManager, OtherPER), Product (including Clothing, Vehicle, Food, Drink, OtherPROD), Medical (including Medication/Vaccine, MedicalProcedure, AnatomicalStructure, Symptom, Disease) and are distributed as follows:<br>
</p>

<center>
<table>
<thead>
<tr>
<th>Split</th>
<th>O</th>
<th>OtherPER</th>
<th>Artist</th>
<th>WrittenWork</th>
<th>VisualWork</th>
<th>Politician</th>
<th>HumanSettlement</th>
<th>ArtWork</th>
<th>Athlete</th>
<th>Facility</th>
<th>MusicalWork</th>
<th>MusicalGRP</th>
<th>ORG</th>
<th>Scientist</th>
<th>Cleric</th>
<th>PrivateCorp</th>
<th>SportsManager</th>
<th>OtherPROD</th>
<th>Software</th>
<th>PublicCorp</th>
<th>Disease</th>
<th>OtherLOC</th>
<th>Vehicle</th>
<th>AnatomicalStructure</th>
<th>Station</th>
<th>SportsGRP</th>
<th>Drink</th>
<th>Food</th>
<th>CarManufacturer</th>
<th>Symptom</th>
<th>Medication / Vaccine</th>
<th>Clothing</th>
<th>AerospaceManufacturer</th>
<th>MedicalProcedure</th>
</tr>
</thead>
<tbody>
<tr>
<td>train</td>
<td>196,008</td>
<td>3,748</td>
<td>7,268</td>
<td>4,536</td>
<td>3,588</td>
<td>2,456</td>
<td>5,864</td>
<td>408</td>
<td>2,908</td>
<td>2,240</td>
<td>1,304</td>
<td>1,242</td>
<td>2,670</td>
<td>630</td>
<td>930</td>
<td>390</td>
<td>650</td>
<td>1,504</td>
<td>1,040</td>
<td>800</td>
<td>564</td>
<td>588</td>
<td>824</td>
<td>556</td>
<td>754</td>
<td>1,482</td>
<td>466</td>
<td>672</td>
<td>488</td>
<td>410</td>
<td>506</td>
<td>426</td>
<td>418</td>
<td>424</td>
</tr>
<tr>
<td>validation</td>
<td>10,430</td>
<td>202</td>
<td>378</td>
<td>234</td>
<td>176</td>
<td>134</td>
<td>310</td>
<td>26</td>
<td>144</td>
<td>108</td>
<td>54</td>
<td>60</td>
<td>146</td>
<td>38</td>
<td>40</td>
<td>22</td>
<td>30</td>
<td>90</td>
<td>46</td>
<td>44</td>
<td>32</td>
<td>26</td>
<td>40</td>
<td>30</td>
<td>40</td>
<td>70</td>
<td>22</td>
<td>26</td>
<td>26</td>
<td>20</td>
<td>24</td>
<td>22</td>
<td>22</td>
<td>22</td>
</tr>
</tbody>
</table>
</center>

<p style="text-align:justify;">
-	<a href="http://dx.doi.org/10.1016/j.artint.2012.03.006"> Pii-masking-200k </a> by the company <a href="https://ai4privacy.com/">ai4Privacy</a> (2023) which is a dataset (for the French part) of 61,958 training data. The entities announced are Prefix, Firstname, Lastname, Date, Time, Phoneimei, Username, Email, State, Jobarea, Url, City, Currency, Accountname, Creditcardnumber, Creditcardcvv, Phonenumber, Creditcardissuer, Currencysymbol, Amount, Sex, Useragent, Jobtitle, Ipv4, Ipv6, Jobtype, Companyname, Gender, Street, Secondaryaddress, County, Age, Accountnumber, IP, Ethereumaddress, Bitcoinaddress, Middlename, IBAN, Vehiclevrm, Dob, Pin, Password, Currencyname, Litecoinaddress, Currencycode, Buildingnumber, Ordinaldirection, Maskednumber, Zipcode, BIC, Nearbygpscoordinate, MAC, Vehiclevin, Eyecolor, Height et SSN, and are distributed as follows:<br>
</p>

<center>
<table>
<thead>
<tr>
<th>Split</th>
<th>Prefix</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Date</th>
<th>Time</th>
<th>Phoneimei</th>
<th>Username</th>
<th>Email</th>
<th>State</th>
<th>Jobarea</th>
<th>Url</th>
<th>City</th>
<th>Currency</th>
<th>Accountname</th>
<th>Creditcardnumber</th>
<th>Creditcardcvv</th>
<th>Phonenumber</th>
<th>Creditcardissuer</th>
<th>Currencysymbol</th>
<th>Amount</th>
<th>Sex</th>
<th>Useragent</th>
<th>Jobtitle</th>
<th>Ipv4</th>
<th>Ipv6</th>
<th>Jobtype</th>
<th>Companyname</th>
<th>Gender</th>
<th>Street</th>
<th>Secondaryaddress</th>
<th>County</th>
<th>Age</th>
<th>Accountnumber</th>
<th>IP</th>
<th>Ethereumaddress</th>
<th>Bitcoinaddress</th>
<th>Middlename</th>
<th>IBAN</th>
<th>Vehiclevrm</th>
<th>Dob</th>
<th>Pin</th>
<th>Password</th>
<th>Currencyname</th>
<th>Litecoinaddress</th>
<th>Currencycode</th>
<th>Buildingnumber</th>
<th>Ordinaldirection</th>
<th>Maskednumber</th>
<th>Zipcode</th>
<th>BIC</th>
<th>Nearbygpscoordinate</th>
<th>MAC</th>
<th>Vehiclevin</th>
<th>Eyecolor</th>
<th>Height</th>
<th>SSN</th>
</tr>
</thead>
<tbody>
<tr>
<td>train</td>
<td>3,980</td>
<td>20,081</td>
<td>6,114</td>
<td>5,832</td>
<td>3,587</td>
<td>2,924</td>
<td>3,502</td>
<td>5,201</td>
<td>3,659</td>
<td>3,550</td>
<td>3,462</td>
<td>3,406</td>
<td>2,318</td>
<td>3,566</td>
<td>3,882</td>
<td>1,219</td>
<td>3,366</td>
<td>2,017</td>
<td>3,874</td>
<td>3,684</td>
<td>4,042</td>
<td>3,207</td>
<td>3,534</td>
<td>3,489</td>
<td>3,426</td>
<td>3,971</td>
<td>3,571</td>
<td>3,876</td>
<td>3753</td>
<td>3,696</td>
<td>3,740</td>
<td>3,924</td>
<td>3,491</td>
<td>2,971</td>
<td>2,151</td>
<td>3,412</td>
<td>3,718</td>
<td>3,006</td>
<td>1,145</td>
<td>4,098</td>
<td>999</td>
<td>3,807</td>
<td>1,078</td>
<td>1,113</td>
<td>1,093</td>
<td>3,887</td>
<td>1,920</td>
<td>3,304</td>
<td>3,728</td>
<td>1,040</td>
<td>2,908</td>
<td>1,597</td>
<td>1,013</td>
<td>1,528</td>
<td>1,472</td>
<td>3,334</td>
</tr>
</tbody>
</table>
</center>

<br>
<p style="text-align:justify;">
These datasets are considered “clean” as they are readily available on the Hugging Face Hub. However, as we will explore in the next section, the data quality of some of these datasets is questionable, necessitating cleaning before they can be used to train a model.
<br><br><br>

It should be noted that other NER datasets exist in French, but are either of lower quality, require extensive preprocessing to be usable, or are too specialized. Examples include the following datasets:<br>
-	<a href="https://aclanthology.org/F12-2050/">Annotation référentielle du Corpus Arboré de Paris 7 en entités nommées (Referential named entity annotation of the Paris 7 French TreeBank) [in French]</a> by Sagot et al. (2012) which is used in the scientific literature as a benchmark for CamemBERT or FlauBERT, for example, but which is not freely available.<br>
-	<a href="http://www.lrec-conf.org/proceedings/lrec2014/workshops/LREC2014Workshop-BioTxtM2014%20Proceedings.pdf#page=33">QUAERO</a> by Névéol et al. (2014) which is a dataset specialized in the medical field.<br>
-	<a href="https://arxiv.org/abs/1410.3791">POLYGLOT-NER</a> by Al-Rfou et al. (2014) is a dataset derived from Wikipedia but with significant doubts about the quality of the annotation.<br>
-	<a href="https://github.com/EuropeanaNewspapers/ner-corpora"> Europeana Newspapers</a> by Neudecker (2016) which is a dataset obtained by OCR of old newspapers from the BnF.<br>
-	<a href="https://github.com/hipe-eval/HIPE-2022-data/blob/main/README.md">HIPE-2022</a> by Faggioli et al. (2022) which includes four datasets (<a href="https://github.com/hipe-eval/HIPE-2022-data/blob/main/documentation/README-ajmc.md">ajmc</a> by Romanello et al. (2020), <a href="https://dl.acm.org/doi/abs/10.1007/978-3-030-58219-7_21"> hipe2020</a> by Ehrmann et al. (2020), <a href="https://infoscience.epfl.ch/record/221391">letemps</a> by Ehrmann et al. (2016), <a href="https://dl.acm.org/doi/abs/10.1145/3404835.3463255">newseye</a> by Hamdi et al. (2021)) obtained by OCR of old newspapers (late 19th - early 20th century).<br>
-	<a href="https://arxiv.org/abs/1703.00948.pdf">DAWT</a> by Spasojevic et al. (2017) no longer available online following the buyout of the company that created the dataset.<br><br>

In our experiments, we decided to work in two configurations.<br>
The first one takes into account the LOC (Locations), ORG (Organizations) and PER (People) entities, enabling us to work on the concatenation of the MultiCONER, MultiNERD, Pii-masking-200k, Wikiann and WikiNER sets. That is, in this case, for datasets managing entities other than the three considered, we re-annotate these additional entities to O (Other).<br>
The second approach involves considering the LOC (Locations), ORG (Organizations), PER (People) and MISC (Miscellaneous) entities, enabling us to work on the concatenation of the MultiCONER, MultiNERD, Pii-masking-200k and WikiNER datasets. In this scenario, we exclude Wikiann, which lacks MISC entities. Additionnaly, datasets containing entities other than LOC, ORG and PER but not explicitly categorized as MISC are re-annotated to include these entities as MISC.
</p>
<br><br> 

# Data leakage and duplication
<p style="text-align:justify;">
Upon examining the quality of the listed datasets, we discovered that each of them individually contained data leaks between training and test samples, as well as duplicate data. Moreover, it should be noted that after completing individual cleaning, additional cleaning must be conducted at the aggregate level. This is because data present in the training sample of one dataset (A) but not in its test sample may be present in the test sample of another dataset (B), leading to a leak when the A+B dataset is formed. <br>

By way of information, the statistics regarding the number of leaks and duplications for the five NER datasets we selected for our experiments are as follows:<br>

-	MultiCONER :<br>
• Leakage between training split and test sample: 13 lines or 0.083%.<br>
• Leaks between the validation split and the test split: 0 lines or 0%.<br>
• Duplicated lines in the training split: 170 lines or 1.081%.<br>
• Duplicated lines in the test split: 170 lines or 1.081%.<br>
• Duplicated lines in the validation split: 1 lines or 0.242%.<br> 
• Duplicated lines in the test split: 2 lines or 0.233%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 1.754%.<br>

-	MultiNERD :<br>
• Leakage between training and test splits: 69 lines or 0.049%.<br>
• Leaks between validation and test splits: 20 lines or 0.114%.<br>
• Duplicated lines in the training split: 2,600 lines or 1.846%.<br>
• Duplicated lines in the validation split: 58 lines or 0.329%.<br>
• Duplicated lines in the test split: 58 lines or 0.328%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 0.833%.<br>

-	Pii-masking-200k :<br>
	This dataset contains no data leaks or duplications.<br>
 
-	WikiNER :<br>
• Leakage between training and test splits: 22 lines or 0.019%.<br>
• Leakage between validation and test splits: 20 lines or 0.331%.<br>
• Duplicated lines in the training split: 562 lines or 0.49%.<br>
• Duplicated lines in the validation split: 17 lines or 0.282%.<br>
• Duplicated lines in the test split: 17 lines or 0.127%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 0.440%.<br>

-	Wikiann :<br>
• Leakage between training and test splits: 742 lines or 3.710%.<br>
• Leakage between validation split and test split: 473 lines or 4.730%.<br>
• Duplicated lines in the training split: 1,889 lines or 9.445%.<br>
• Duplicated lines in the validation split: 700 lines or 7,00%.<br>
• Duplicated lines in the test split: 644 lines or 6.440%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 18.590%.<br>


We can see that over 80% of the datasets considered contained leaks or duplications.<br><br>

The statistics concerning the number of leaks and duplications for the concatenation of the five NER datasets we selected for our experiments are as follows:<br>

- 3-entity configuration (LOC, ORG and PER):<br>
• Leakage between training and test splits: 1,071 lines or 0.371%.<br>
• Leakage between validation split and test split: 613 lines or 1.799%.<br>
• Duplicated lines in the training split: 1,839 lines or 0.638%.<br>
• Duplicated lines in the validation split: 8 lines or 0.023%.<br>
• Duplicated lines in the test split: 8 lines or 0.019%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 4.015%.<br>


- 4-entity configuration (LOC, ORG, PER and MISC):<br>
• Leakage between training split and test split: 1,028 lines or 0.384%.<br>
• Leaks between the validation split and the test split: 134 lines or 0.552%.<br>
• Duplicated lines in the training split: 1,779 lines or 0.664%.<br>
• Duplicated lines in the validation split: 1 lines or 0.004%.<br>
• Duplicated lines in the test split: 1 lines or 0.003%.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 3.647%.<br>


<br>

Cleaned NER datasets (with no data leaks or duplications) are available on Hugging Face: <a href="https://hf.co/datasets/CATIE-AQ/frenchNER_3entities"> frenchNER_3entities</a> and <a href="https://hf.co/datasets/CATIE-AQ/frenchNER_4entities"> frenchNER_4entities</a>.</p>


<br><br> 


#   Which model for solving a NER task?
<p style="text-align:justify;">

Any transformer model can solve this task, whether it's a complete transformer (encoder and decoder), a transformer decoder, or a transformer encoder. Only the way in which data is supplied to the model differs between the different approaches.<br>
In practice, encoder models are the most widely used, as they are best suited to solving classification tasks and are commonly utilized. This preference may stem from the fact that encoder transformers were available before decoder transformers and fully transformers, especially in the case of French.<br>
It's worth noting that the CamemBERT model by <a href="https://arxiv.org/abs/1911.03894">Martin et al. (2019)</a>  appears to be more commonly used than FlauBERT by <a href="https://arxiv.org/abs/1912.05372">He et al. (2019)</a> or the NER task, although the reason for this preference is not explicitly stated. <br>
Note that in November 2024, <a href="https://arxiv.org/abs/2411.08868">Antoun et al. (2024)</a> introduced CamemBERT 2.0. In this paper, they actually propose two models: a CamemBERT2 and a CamemBERTa2. These models are trained on more data than in their first version and have the advantage of being able to handle a sequence of 1024 tokens compared with 512 previously.<br><br>

Additionally, besides the choice of model, the NER task can be performed at the token level or at the level of an n-gram of consecutive tokens, referred to in the literature as a span. An efficient and user-friendly library for performing NER at the span level is  <a href="https://github.com/tomaarsen/SpanMarkerNER">SpanMarker</a> by Tom Aarsen (2023).<br><br>

A number of finetuned models for the NER task are available in open-source. These include:<br>
- The <a href="https://huggingface.co/flair/ner-french">ner-french model (a Bi-LSTM model) finetuned on WikiNER at the token level</a> by Flair and more particularly Akbik et al. (2018)<br>
- The <a href=" https://hf.co/Jean-Baptiste/camembert-ner ">Camembert-ner finetuned on WikiNER at the token level</a> by Jean-Baptiste Polle<br> 
- The model <a href="https://hf.co/cmarkea/distilcamembert-base-ner">DistillCamemBERT base finetuned on WikiNER at the token level</a> by Crédit Mutuel and more particularly by Delestre and Amar (2022)
<br><br>

The limitation of these models is that none of them uses all the data available, as all three are trained solely  on the WikiNER dataset. 
This results in the specialization of the models on Wikipedia-type data, as seen in the evaluation section, thereby impeding their ability to generalize new data. What's more, as mentioned above, WikiNER contains data leakage and duplication, distorting the models' actual performance.<br>
Additionally, it’s worth noting that no large-sized French NER model is currently available.<br><br>


Given these limitations, we have developed our own model at CATIE: <b>NERmembert</b>. It uses all the quality data available in open-source and has been trained in several configurations. All free and open-source:<br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert-base-3entities">https://huggingface.co/CATIE-AQ/NERmembert-base-3entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert-large-3entities">https://huggingface.co/CATIE-AQ/NERmembert-large-3entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert2-3entities">https://huggingface.co/CATIE-AQ/NERmembert2-3entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmemberta-3entities">https://huggingface.co/CATIE-AQ/NERmemberta-3entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert-base-4entities">https://huggingface.co/CATIE-AQ/NERmembert-base-4entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert-large-4entities">https://huggingface.co/CATIE-AQ/NERmembert-large-4entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmembert2-4entities">https://huggingface.co/CATIE-AQ/NERmembert2-4entities</a><br>
- <a href="https://huggingface.co/CATIE-AQ/NERmemberta-4entities">https://huggingface.co/CATIE-AQ/NERmemberta-4entities</a><br>
</p>
<br><br> 

# Metrics and evaluation
<p style="text-align:justify;">
How do the models perform? Let's start by describing the metrics on which NER models are evaluated.
</p>

## Metrics

<p style="text-align:justify;">
In NER, precision, recall and F1 score (which is the harmonic mean of the previous two metrics) are generally given for each entity as well as globally. Accuracy can also be entered.  
</p>

## Evaluation

<p style="text-align:justify;">
From an implementation point of view, it is advisable to utilize Hugging Face's <a href="https://pypi.org/project/evaluate/">evaluate</a> Python package.<br>
</p>

### 3-entity case

<p style="text-align:justify;">
Below, we list the performance result tables for the different models considered in the three-entity configuration (PER, LOC, ORG) of the <a href="https://hf.co/datasets/CATIE-AQ/frenchNER_3entities"> frenchNER_3entities</a> dataset.<br>

For reasons of space, we present only the F1 of the different models. You can view the full results (i.e. all metrics) in the model maps available at 
<a href="https://hf.co/collections/CATIE-AQ/french-ner-pack-658aefafe3f7a2dcf0e4dbb4">Hugging Face</a>.<br>
</p>

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>Parameters</th>
      <th><br>Context</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>110M</td>
        <td><br>512 tokens</td>
        <td><br>0.941</td>
        <td><br>0.883</td>
        <td><br>0.658</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>67.5M</td>
        <td><br>512 tokens</td>
        <td><br>0.942</td>
        <td><br>0.882</td>
        <td><br>0.647</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>110M</td>
        <td><br>512 tokens</td>
        <td><br>0.951</td>
        <td><br>0.894</td>
        <td><br>0.671</td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-4entities">NERmembert-large-4entities</a></td>
        <td><br>336M</td>
        <td><br>512 tokens</td>
        <td><br>0.958</td>
        <td><br>0.901</td>
        <td><br>0.685</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>110M</td>
        <td><br>512 tokens</td>
        <td><br>0.966</td>
        <td><br>0.940</td>
        <td><br>0.876</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-3entities">NERmemberta-2entities</a> </td>
        <td><br>111M</td>
        <td><br>1024 tokens</td>
        <td><br>0.967</td>
        <td><br>0.942</td>
        <td><br>0.875</td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-3entities">NERmemberta-3entities</a> </td>
        <td><br>111M</td>
        <td><br>1024 tokens</td>
        <td><br><b>0.970</b></td>
        <td><br>0.943</td>
        <td><br>0.881</td>
      </tr>
      <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-3entities">NERmembert-large-3entities</a></td>
        <td><br>336M</td>
        <td><br>512 tokens</td>
        <td><br>0.969</td>
        <td><br><b>0.947</b></td>
        <td><br><b>0.890</b></td>
    </tr>
      </tr>
</tbody>
</table>
</center>

<br>

<p style="text-align:justify;">
We can observe that the NERmembert models (whatever the number of entities considered) perform better than the other models. This is probably because they saw three times as much data during the finetuning.<br>
Similarly, we can see that the large models perform better than the base models.<br>
Note that the difference in performance is particularly important between NERmembert 3 entities and non-NERmembert models, with differences of over 20 points on the ORG entity, for example.<br><br>
	
The NERmembert models appear to be more generalist than the non-NERmembert models, which have only been trained on the WikiNER dataset and are therefore specialized on Wikipedia-type data.
In fact, they perform better than NERmembert on this dataset (see below).
We also note that while <a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a> announces the best results on WikiNER (once the leaks and duplications of the dataset have been removed), <a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a> actually gives the best results.<br>
One source of surprise for us, however, is that we anticipated these two models to perform well on the WikiAnn dataset, which is also derived from Wikipedia (with input texts shorter than those of WikiNER), a phenomenon not observed in the results.<br><br>

Finally, there's a difference between the 3-entity and 4-entity NERmembert models. The difference between the two configurations is that the 3-entity NERmembert saw a little more data, namely the WikiAnn dataset, which is around 25,000 rows longer. In the detailed results per dataset below, we can see that the 4-entity model performs as well or better as the 3-entity model on the datasets they share, but has difficulties on WikiAnn.<br>

For more details, you can expand the tab below to display the results obtained for each dataset.
</p>

<details>
<summary> Results by dataset </summary>

<h4>MultiCONER</h4> 

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>0.940</td>
        <td><br>0.761</td>
        <td><br>0.723</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.921</td>
        <td><br>0.748</td>
        <td><br>0.694</td>
    </tr>
    <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>0.960</td>
        <td><br>0.887</td>
        <td><br>0.876</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-3entities">NERmembert2-3entities</a></td>
        <td><br>0.958</td>
        <td><br>0.876</td>
        <td><br>0.863</td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-3entities">NERmemberta-3entities</a></td>
        <td><br>0.964</td>
        <td><br>0.865</td>
        <td><br>0.859</td>
      </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-3entities">NERmembert-large-3entities</a></td>
        <td><br><b>0.965</b></td>
        <td><br><b>0.902</b></td>
        <td><br><b>0.896</b></td>
    </tr>
    </tr>  
</tbody>
</table>

</center>
<br>

<h4>MultiNERD</h4>

<br>
<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>0.962</td>
        <td><br>0.934</td>
        <td><br>0.888</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.972</td>
        <td><br>0.938</td>
        <td><br>0.884</td>
    </tr>
    <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>0.985</td>
        <td><br>0.973</td>
        <td><br>0.938</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-3entities">NERmembert2-3entities</a></td>
        <td><br>0.985</td>
        <td><br>0.972</td>
        <td><br>0.933</td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-3entities">NERmemberta-3entities</a></td>
        <td><br>0.986</td>
        <td><br>0.974</td>
        <td><br>0.945</td>
      </tr>
      <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-3entities">NERmembert-large-3entities</a></td>
        <td><br><b>0.987</b></td>
        <td><br><b>0.979</b></td>
        <td><br><b>0.953</b></td>
    </tr>
    </tr> 
</tbody>
</table>
</center>
<br>

<h4>WikiNER</h4>

<br>
<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br><b>0.986</b></td>
        <td><br><b>0.966</b></td>
        <td><br><b>0.938</b></td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.983</td>
        <td><br>0.964</td>
        <td><br>0.925</td>
    </tr>
    <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>0.969</td>
        <td><br>0.945</td>
        <td><br>0.878</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-3entities">NERmembert2-3entities</a></td>
        <td><br>0.969</td>
        <td><br>0.946</td>
        <td><br>0.866</td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-3entities">NERmemberta-3entities</a></td>
        <td><br>0.971</td>
        <td><br>0.948</td>
        <td><br>0.885</td>
      </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-3entities">NERmembert-large-3entities</a></td>
        <td><br>0.972</td>
        <td><br>0.950</td>
        <td><br>0.893</td>
    </tr>
    </tr>
</tbody>
</table>
</center>
<br>

<h4>wikiann</h4>

<br>
<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>0.867</td>
        <td><br>0.722</td>
        <td><br>0.451</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.862</td>
        <td><br>0.722</td>
        <td><br>0.451</td>
    </tr>
    <tr>
      <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>0.947</td>
        <td><br>0.906</td>
        <td><br>0.886</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-3entities">NERmembert2-3entities</a></td>
        <td><br>0.950</td>
        <td><br>0.911</td>
        <td><br><b>0.910</b></td>
    </tr>
        <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-3entities">NERmemberta-3entities</a></td>
        <td><br><b>0.953</b></td>
        <td><br>0.902</td>
        <td><br>0.890</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-3entities">NERmembert-large-3entities</a></td>
        <td><br>0.949</td>
        <td><br><b>0.912</b></td>
        <td><br>0.899</td>
    </tr>
    </tr>
</tbody>
</table>
</center>
</details>
<br><br>

### 4-entity case

<p style="text-align:justify;">
Below, we list the tables of performance results for the various models considered in the four-entity configuration (PER, LOC, ORG, MISC) of the dataset <a href="https://hf.co/datasets/CATIE-AQ/frenchNER_4entities"> frenchNER_4entities</a>.<br>
</p>


<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>Parameters</th>
      <th><br>Context</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
      <th><br>MISC</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>110M</td>
        <td><br>512 tokens</td>
        <td><br>0.971</td>
        <td><br>0.947</td>
        <td><br>0.902</td>
        <td><br>0.663</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>67.5M</td>
        <td><br>512 tokens</td>
        <td><br>0.974</td>
        <td><br>0.948</td>
        <td><br>0.892</td>
        <td><br>0.658</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>110M</td>
        <td><br>512 tokens</td>
        <td><br>0.978</td>
        <td><br>0.958</td>
        <td><br>0.903</td>
        <td><br>0.814</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-4entities">NERmembert2-4entities</a></td>
        <td><br>111M</td>
        <td><br>1024 tokens</td>
        <td><br>0.978</td>
        <td><br>0.958</td>
        <td><br>0.901</td>
        <td><br>0.806</td>
    </tr>
    <tr>
        <td rowspan="1"><a href="https://hf.co/CATIE-AQ/NERmemberta-4entities">NERmemberta-4entities</a></td>
        <td><br>111M</td>
        <td><br>1024 tokens</td>
        <td><br>0.979</td>
        <td><br>0.961</td>
        <td><br>0.915</td>
        <td><br>0.812</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-4entities">NERmembert-large-4entities</a></td>
        <td><br>336M</td>
        <td><br>512 tokens</td>
        <td><br><b>0.982</b></td>
        <td><br><b>0.964</b></td>
        <td><br><b>0.919</b></td>
        <td><br><b>0.834</b></td>
    </tr>
</tbody>
</table>
</center>
<br>

<p style="text-align:justify;">
Again, for reasons of space, we only show the F1 of the various models. You can consult the complete results (i.e. all metrics) in the model cards available at <a href="https://hf.co/collections/CATIE-AQ/french-ner-pack-658aefafe3f7a2dcf0e4dbb4">Hugging Face</a>.<br><br>
The results are in line with those observed for the 3-entity configuration.
Namely, NERmembert models (whatever the number of entities considered) perform better than other models, and wide models perform better than basic models.<br>
On PER, LOC and ORG entities, NERmembert 3 entities perform similarly to NERmembert 4 entities. The advantage of NERmembert 4 entities is that they handle the additional MISC entity.<br>
Once again, NERmembert appear to be more generalist than non-NERmembert. As with the three-entity configuration, these models perform better on WikiNER, but have difficulties on other datasets.<br>
There is a significant discrepancy on the MISC category. One explanation could be the nature of the definition of this entity. For WikiNER, it's mainly work names (books or films, for example), whereas MultiNERD and MultiCONER also handle medical names (diseases/symptoms) and products (vehicle brands/food/clothing).<br><br>

For more details, you can expand the tab below to display the results obtained for each dataset.<br>
</p>

<details>
<summary> Results by dataset</summary>

<br>

<h4>MultiCONER</h4> 

<br>

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
      <th><br>MISC</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>0.940</td>
        <td><br>0.761</td>
        <td><br>0.723</td>
        <td><br>0.560</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.921</td>
        <td><br>0.748</td>
        <td><br>0.694</td>
        <td><br>0.530</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>0.960</td>
        <td><br>0.890</td>
        <td><br>0.867</td>
        <td><br>0.852</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-4entities">NERmembert2-4entities</a></td>
        <td><br>0.964</td>
        <td><br>0.888</td>
        <td><br>0.864</td>
        <td><br>0.850</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-4entities">NERmemberta-4entities</a></td>
        <td><br>0.966</td>
        <td><br>0.891</td>
        <td><br>0.867</td>
        <td><br>0.862</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-4entities">NERmembert-large-4entities</a></td>
        <td><br><b>0.969</b></td>
        <td><br><b>0.919</b></td>
        <td><br><b>0.904</b></td>
        <td><br><b>0.864</b></td>
    </tr>
</tbody>
</table>
</center>

<br>
<h4>MultiNERD</h4>
<br>
<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
      <th><br>MISC</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br>0.962</td>
        <td><br>0.934</td>
        <td><br>0.888</td>
        <td><br>0.419</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.972</td>
        <td><br>0.938</td>
        <td><br>0.884</td>
        <td><br>0.430</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-4entities">NERmembert2-4entities</a></td>
        <td><br>0.986</td>
        <td><br>0.974</td>
        <td><br>0.937</td>
        <td><br>0.761</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-4entities">NERmemberta-4entities</a></td>
        <td><br><b>0.987</b></td>
        <td><br><b>0.976</b></td>
        <td><br>0.942</td>
        <td><br>0.770</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>0.985</td>
        <td><br>0.973</td>
        <td><br>0.938</td>
        <td><br>0.770</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-4entities">NERmembert-large-4entities</a></td>
        <td><br><b>0.987</b></td>
        <td><br>0.976</td>
        <td><br>0.948</td>
        <td><br><b>0.790</b></td>
    </tr>
</tbody>
</table>
</center>

<br>
<h4>WikiNER</h4>
<br>

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
      <th><br>MISC</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/Jean-Baptiste/camembert-ner">Jean-Baptiste/camembert-ner</a></td>
        <td><br><b>0.986</b></td>
        <td><br><b>0.966</b></td>
        <td><br><b>0.938</b></td>
        <td><br><b>0.938</b></td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/cmarkea/distilcamembert-base-ner">cmarkea/distilcamembert-base-ner</a></td>
        <td><br>0.983</td>
        <td><br>0.964</td>
        <td><br>0.925</td>
        <td><br>0.926</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>0.970</td>
        <td><br>0.945</td>
        <td><br>0.876</td>
        <td><br>0.872</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert2-4entities">NERmembert2-4entities</a></td>
        <td><br>0.968</td>
        <td><br>0.945</td>
        <td><br>0.874</td>
        <td><br>0.871</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmemberta-4entities">NERmemberta-4entities</a></td>
        <td><br>0.969</td>
        <td><br>0.950</td>
        <td><br>0.897</td>
        <td><br>0.871</td>
    </tr>
      <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-large-4entities">NERmembert-large-4entities</a></td>
        <td><br>0.975</td>
        <td><br>0.953</td>
        <td><br>0.896</td>
        <td><br>0.893</td>
    </tr>
</tbody>
</table>
</center>
</details>

<br><br>

### Span models

<p style="text-align:justify;">
We've listed some token-level trained models above. We have also tested training models at the n-gram level of consecutive tokens with the SpanMarker library. Literature on the subject (<a href="https://raw.githubusercontent.com/tomaarsen/SpanMarkerNER/main/thesis.pdf">Tom Aarsen’s thesis</a> SpanMarker's author provides a good summary) suggests that models trained at span level perform better than models trained at token level.<br>

Our experiments show the opposite results:<br>
</p>

<h4>3-entity case</h4>

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br>Span Marker (frenchNER_3entities)</td>
        <td><br>0.959</td>
        <td><br>0.924</td>
        <td><br>0.850</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-3entities">NERmembert-base-3entities</a></td>
        <td><br>0.966</td>
        <td><br>0.940</td>
        <td><br>0.876</td>
    </tr>
</tbody>
</table>
</center>

<h4>4-entity case</h4>

<center>
<table>
<thead>
    <tr>
      <th><br>Model</th>
      <th><br>PER</th>
      <th><br>LOC</th>
      <th><br>ORG</th>
      <th><br>MISC</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td rowspan="1"><br>Span Marker (frenchNER_4entities)</td>
        <td><br>0.966</td>
        <td><br>0.939</td>
        <td><br>0.892</td>
        <td><br>0.760</td>
    </tr>
    <tr>
        <td rowspan="1"><br><a href="https://hf.co/CATIE-AQ/NERmembert-base-4entities">NERmembert-base-4entities</a></td>
        <td><br>0.978</td>
        <td><br>0.958</td>
        <td><br>0.903</td>
        <td><br>0.814</td>
    </tr>
</tbody>  
</table>
</center>
<br>

<p style="text-align:justify;">
There are two possible explanations for these results. The first is that performance may vary according to the language (Tom Aarsen told us that similar observations were made in Spanish).
The second is that the results obtained in English are biased and therefore unreliable. Indeed, the CoNLL2003 dataset, which is massively used in English, also contains data leaks and duplications:<br>

• Leakage between training and test splits: 78 lines or 0.556%.<br>
• Leakage between validation and test splits: 25 lines or 0.769%.<br>
• Duplicated lines in the training split: 1,350 lines or 9.615%.<br>
• Duplicated lines in the validation split: 269 lines or 8.277%.<br>
• Duplicated lines in the test split: 269 lines or 7.79 %.<br>
Thus, between leaks and duplications, the performance measured on the test split is biased by at least 10.77%.<br><br>

Finally, we end this section by pointing out that training a SpanMarker model takes three times as long as training a NERmembert.
</p>

#  Example of use

```python
from transformers import pipeline

ner = pipeline('token-classification', model='CATIE-AQ/NERmembert-base-4entities', tokenizer='CATIE-AQ/NERmembert-base-4entities', aggregation_strategy="simple")

results = ner(
"Le dévoilement du logo officiel des JO s'est déroulé le 21 octobre 2019 au Grand Rex. Ce nouvel emblème et cette nouvelle typographie ont été conçus par le designer Sylvain Boyer avec les agences Royalties & Ecobranding. Rond, il rassemble trois symboles : une médaille d'or, la flamme olympique et Marianne, symbolisée par un visage de femme mais privée de son bonnet phrygien caractéristique. La typographie dessinée fait référence à l'Art déco, mouvement artistique des années 1920, décennie pendant laquelle ont eu lieu pour la dernière fois les Jeux olympiques à Paris en 1924. Pour la première fois, ce logo sera unique pour les Jeux olympiques et les Jeux paralympiques."
)

print(results)
```
```python
[{'entity_group': 'MISC', 'score': 0.9456432, 'word': 'JO', 'start': 36, 'end': 38},
{'entity_group': 'LOC', 'score': 0.9990527, 'word': 'Grand Rex', 'start': 75, 'end': 84},
{'entity_group': 'PER', 'score': 0.99884754, 'word': 'Sylvain Boyer', 'start': 165, 'end': 178},
{'entity_group': 'ORG', 'score': 0.99118334, 'word': 'Royalties & Ecobranding', 'start': 196, 'end': 219},
{'entity_group': 'PER', 'score': 0.9446552, 'word': 'Marianne', 'start': 299, 'end': 307},
{'entity_group': 'MISC', 'score': 0.97599506, 'word': 'Art déco', 'start': 438, 'end': 446},
{'entity_group': 'MISC', 'score': 0.99798834, 'word': 'Jeux olympiques', 'start': 550, 'end': 565},
{'entity_group': 'LOC', 'score': 0.7205312, 'word': 'Paris', 'start': 568, 'end': 573},
{'entity_group': 'MISC', 'score': 0.996698, 'word': 'Jeux olympiques', 'start': 635, 'end': 650},
{'entity_group': 'MISC', 'score': 0.9955608, 'word': 'Jeux paralympiques', 'start': 658, 'end': 676}]
```
<br>
<p style="text-align:justify;">
If you'd like to test the model more directly, a demonstrator has been created and is hosted as a Space on Hugging Face available <a href="https://huggingface.co/spaces/CATIE-AQ/NERmembert">here</a> or below:
</p>

<iframe
	src="https://catie-aq-nermembert.hf.space"
	frameborder="0"
	width="950"
	height="600"
></iframe>
<br><br> 


#  Possible improvements
<p style="text-align:justify;">
Let us conclude by listing some possible improvements to this work. <br>

In the section on data description, we have listed the available number of entity by type. It is possible to identify an imbalance in the results (for ORG and MISC entities in particular). An important task would therefore be to balance the entities available to us by, for example, augmenting the data by simply substituting one entity value with another of the same type. This can be done using entities already present in our dataset (which could make the value of an entity more robust to the surrounding context) or from external sources (for ORGs, we can think of data from chambers of commerce or INSEE, for instance).<br> 

Another option would be to add other entities, but this would require a substantial annotation effort.
</p>

#   Conclusion
<p style="text-align:justify;">
We introduce the NERmembert model in eight versions. All trained models come with the datasets we used, ensuring they are free from data leaks or duplications. 
All are accessible on <a href="https://huggingface.co/collections/CATIE-AQ/french-ner-pack-658aefafe3f7a2dcf0e4dbb4">Hugging Face</a> for free. 
</p>
<br><br> 


#   Citations
## Models
```
@misc {NERmemberta2024,
    author       = { {BOURDOIS, Loïck} },  
    organization = { {Centre Aquitain des Technologies de l'Information et Electroniques} },  
    title        = { NERmemberta-3entities (Revision 989f2ee) },
    year         = 2024,
    url          = { https://huggingface.co/CATIE-AQ/NERmemberta-3entities },
    doi          = { 10.57967/hf/3640 },
    publisher    = { Hugging Face }
}
```
```
@misc {NERmembert2024,
    author       = { {BOURDOIS, Loïck} },  
    organization = { {Centre Aquitain des Technologies de l'Information et Electroniques} },  
    title        = { NERmembert-large-4entities (Revision 1cd8be5) },
    year         = 2024,
    url          = { https://huggingface.co/CATIE-AQ/NERmembert-large-4entities },
    doi          = { 10.57967/hf/1752 },
    publisher    = { Hugging Face }
}
```

## Datasets
```
@misc {frenchNER2024,
    author       = { {BOURDOIS, Loïck} },  
    organization = { {Centre Aquitain des Technologies de l'Information et Electroniques} },  
    title        = { frenchNER_4entities (Revision f1e8fef) },
    year         = 2024,
    url          = { https://huggingface.co/datasets/CATIE-AQ/frenchNER_4entities },
    doi          = { 10.57967/hf/1751 },
    publisher    = { Hugging Face }
}
```

<br><br> 


#   References
<p style="text-align:justify;">
- <a href="https://aclanthology.org/W03-0419/">Introduction to the CoNLL-2003 Shared Task: Language-Independent Named Entity Recognition</a> by  Erik F. Tjong Kim Sang and Fien De Meulder (2003)<br>
- <a href="">http://dx.doi.org/10.1016/j.artint.2012.03.006">Learning multilingual named entity recognition from Wikipedia</a> by Nothman et al. (2013)<br>
- <a href="https://arxiv.org/abs/1902.00193">Massively Multilingual Transfer for NER</a> by Rahimi et al. (2019)<br>
- <a href="https://www.aclweb.org/anthology/P19-1015/">Massively Multilingual Transfer for NER</a> by Pan, Xiaoman, et al. (2019)<br>
- <a href="https://aclanthology.org/2022.findings-naacl.60">MultiNERD: A Multilingual, Multi-Genre and Fine-Grained Dataset for Named Entity Recognition (and Disambiguation)</a> by Tedeschi and Navigli (2022)<br>
- <a href="https://arxiv.org/abs/2305.06586">SemEval-2023 Task 2: Fine-grained Multilingual Named Entity Recognition (MultiCONER 2)</a> by Fetahu et al. (2023)<br>
- <a href="https://aclanthology.org/F12-2050/">Annotation référentielle du Corpus Arboré de Paris 7 en entités nommées (Referential named entity annotation of the Paris 7 French TreeBank) [in French]</a> by Sagot et al. (2012)<br>
- <a href="https://huggingface.co/datasets/ai4privacy/pii-masking-200k">Pii-masking-200k</a> by ai4Privacy (2023)<br>
- <a href="http://www.lrec-conf.org/proceedings/lrec2014/workshops/LREC2014Workshop-BioTxtM2014%20Proceedings.pdf#page=33">The Quaero French Medical Corpus: A Ressource for Medical Entity Recognition and Normalization</a> by Névéol et al. (2014)<br>
- <a href="https://arxiv.org/abs/1410.3791">POLYGLOT-NER: Massive Multilingual Named Entity Recognition</a> by Al-Rfou et al. (2014)<br>
- <a href="https://github.com/EuropeanaNewspapers/ner-corpora"> Europeana Newspapers</a> by Neudecker (2016)<br>
- <a href="https://github.com/hipe-eval/HIPE-2022-data/blob/main/README.md">HIPE-2022</a> by Faggioli et al. (2022)<br>
- <a href="https://github.com/hipe-eval/HIPE-2022-data/blob/main/documentation/README-ajmc.md">ajmc</a> by Romanello et al. (2020)<br>
- <a href="https://dl.acm.org/doi/abs/10.1007/978-3-030-58219-7_21">Overview of CLEF HIPE 2020: Named Entity Recognition and Linking on Historical Newspapers</a> by Ehrmann et al. (2020)<br>
- <a href="https://infoscience.epfl.ch/record/221391">Diachronic Evaluation of NER Systems on Old Newspapers</a> by Ehrmann et al. (2016)<br>
- <a href="https://dl.acm.org/doi/abs/10.1145/3404835.3463255">A Multilingual Dataset for Named Entity Recognition, Entity Linking and Stance Detection in Historical Newspapers</a> by Hamdi et al. (2021)<br>
- <a href="https://arxiv.org/abs/1703.00948.pdf">DAWT: Densely Annotated Wikipedia Texts across multiple languages</a> by Spasojevic et al. (2017) <br>
- <a href="https://arxiv.org/abs/1911.03894">CamemBERT: a Tasty French Language Model</a> by Martin et al. (2019)<br>
- <a href="https://arxiv.org/abs/1912.05372">FlauBERT: Unsupervised Language Model Pre-training for French</a> by He et al. (2019<br>
- <a href="https://arxiv.org/abs/2411.08868">CamemBERT 2.0: A Smarter French Language Model Aged to Perfection</a> by Antoun et al. (2024)<br>
- <a href="https://github.com/tomaarsen/SpanMarkerNER">SpanMarker</a> by Aarsen (2023)<br>
- <a href="https://huggingface.co/flair/ner-french">ner-french</a> by Akbik et al. (2018)<br>
- <a href="https://huggingface.co/Jean-Baptiste/camembert-ner">camembert-ner</a> by Polle (2021)<br>
- <a href="https://huggingface.co/cmarkea/distilcamembert-base-ner"> distilcamembert</a> by Delestre and Amar (2022)
</p>
<br><br>


# Comments
<script src="https://utteranc.es/client.js"
        repo="catie-aq/blog-vaniila"
        issue-term="pathname"
        label="[Comments]"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>
